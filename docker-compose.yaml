version: '3'
volumes:
  pgdata:
services:
  python:
    build:
      context: .
      dockerfile: docker/python/Dockerfile
    image: xnandersson/django-greenfield
    volumes:
     - ./src:/src
    ports:
     - 8000:8000
    links:
     - postgres
     - dc
  postgres:
    image: postgres:latest
    environment:
      POSTGRES_USER: greenfield
      POSTGRES_DB: greenfield
      POSTGRES_PASSWORD: greenfield
    volumes:
     - pgdata:/var/lib/postgresql/data
    ports:
     - 5432:5432
  dc:
    build:
      context: https://github.com/xnandersson/docker-dc
    image: xnandersson/dc:latest
    privileged: true
    environment:
      SAMBA_DOMAIN: openforce
      SAMBA_HOST_NAME: dc
      SAMBA_ADMINPASS: Abc123!
      SAMBA_REALM: OPENFORCE.ORG

